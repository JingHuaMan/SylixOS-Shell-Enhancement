;/*********************************************************************************************************
;**
;**                                    中国软件开源组织
;**
;**                                   嵌入式实时操作系统
;**
;**                                       SylixOS(TM)
;**
;**                               Copyright  All Rights Reserved
;**
;**--------------文件信息--------------------------------------------------------------------------------
;**
;** 文   件   名: ppcSprAsm.S
;**
;** 创   建   人: Jiao.JinXing (焦进星)
;**
;** 文件创建日期: 2015 年 12 月 17 日
;**
;** 描        述: PowerPC 体系构架特殊功能寄存器接口.
;*********************************************************************************************************/

#ifndef ASSEMBLY
#define ASSEMBLY 1
#endif

#include <arch/assembler.h>

    FILE_BEGIN()

    EXPORT_LABEL(ppcGetMSR)
    EXPORT_LABEL(ppcGetDAR)
    EXPORT_LABEL(ppcSetDEC)
    EXPORT_LABEL(ppcGetDEC)
    EXPORT_LABEL(ppcSetSPRG0)
    EXPORT_LABEL(ppcSetSPRG1)
    EXPORT_LABEL(ppcSetSPRG2)
    EXPORT_LABEL(ppcSetSPRG3)

;/*********************************************************************************************************
;  读取 MSR 寄存器
;*********************************************************************************************************/

FUNC_DEF(ppcGetMSR)
    MFMSR   R3
    ISYNC
    BLR
    FUNC_END()

;/*********************************************************************************************************
;  读取 DAR 寄存器
;*********************************************************************************************************/

FUNC_DEF(ppcGetDAR)
    MFSPR   R3 , DAR
    ISYNC
    BLR
    FUNC_END()

;/*********************************************************************************************************
;  读取和设置 DEC 寄存器
;*********************************************************************************************************/

FUNC_DEF(ppcSetDEC)
    MTSPR   DEC , R3
    BLR
    FUNC_END()

FUNC_DEF(ppcGetDEC)
    MFSPR   R3 , DEC
    BLR
    FUNC_END()

;/*********************************************************************************************************
;  设置 SPRG0 寄存器
;*********************************************************************************************************/

FUNC_DEF(ppcSetSPRG0)
    MTSPR   SPRG0 , R3
    BLR
    FUNC_END()

;/*********************************************************************************************************
;  设置 SPRG1 寄存器
;*********************************************************************************************************/

FUNC_DEF(ppcSetSPRG1)
    MTSPR   SPRG1 , R3
    BLR
    FUNC_END()

;/*********************************************************************************************************
;  设置 SPRG2 寄存器
;*********************************************************************************************************/

FUNC_DEF(ppcSetSPRG2)
    MTSPR   SPRG2 , R3
    BLR
    FUNC_END()

;/*********************************************************************************************************
;  设置 SPRG3 寄存器
;*********************************************************************************************************/

FUNC_DEF(ppcSetSPRG3)
    MTSPR   SPRG3 , R3
    BLR
    FUNC_END()

    FILE_END()

;/*********************************************************************************************************
;  END
;*********************************************************************************************************/
