/*********************************************************************************************************
**
**                                    中国软件开源组织
**
**                                   嵌入式实时操作系统
**
**                                SylixOS(TM)  LW : long wing
**
**                               Copyright All Rights Reserved
**
**--------------文件信息--------------------------------------------------------------------------------
**
** 文   件   名: eventfd.h
**
** 创   建   人: Han.Hui (韩辉)
**
** 文件创建日期: 2013 年 11 月 20 日
**
** 描        述: Linux 兼容 eventfd 实现.
*********************************************************************************************************/

#ifndef __SYS_EVENTFD_H
#define __SYS_EVENTFD_H

#include <stdint.h>

/*********************************************************************************************************
 event type
*********************************************************************************************************/

typedef uint64_t        eventfd_t;

/*********************************************************************************************************
 eventfd() flags
*********************************************************************************************************/

#define EFD_SEMAPHORE   O_BINARY
#define EFD_CLOEXEC     O_CLOEXEC
#define EFD_NONBLOCK    O_NONBLOCK

/*********************************************************************************************************
 eventfd api
*********************************************************************************************************/

#ifdef __cplusplus
extern "C" {
#endif                                                                  /*  __cplusplus                 */

int eventfd(unsigned int initval, int flags);
int eventfd_read(int fd, eventfd_t *value);
int eventfd_write(int fd, eventfd_t value);

#ifdef __cplusplus
}
#endif                                                                  /*  __cplusplus                 */

#endif                                                                  /*  __SYS_EVENTFD_H             */
/*********************************************************************************************************
  END
*********************************************************************************************************/
